    <!-- Bottom Box: Quick Actions -->
    <div class="bg-white border border-gray-300 shadow p-4 rounded-2xl flex-1">
        <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>                                        <!-- title -->

        <!-- add note button -->
        <!-- Alpine.js container, reactive state variable to track whether window is open or not -->
        <div x-data="{ open: false }" class="flex-1 mt-4 py-2 px-4 rounded-xl border border-gray-100">

            <!-- Add Note button, will open the actual text area when triggered, takes entire div using h-full w-full -->
            <button 
                @click="open = !open" 
                class="w-full h-full text-gray-500 flex items-center gap-2"
            >  <!-- if open, it will set it to false if clicked again to close it-->
                
                <!-- note svg icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                </svg>

                Add Note                                   
            </button>

            <!-- Form, initially hidden since open is false, defines the POST method and HTMX for updates, and defines url to be used -->
            <form 
                x-show="open" 
                x-transition 
                method="POST"
                hx-post="{% url 'add_note' claim.id %}"
                hx-target="#notes-panel"
                hx-swap="innerHTML"
                class="mt-2"
            >
                {% csrf_token %}                                                                <!-- middleware token to prevent 403 forbidden error -->
                <textarea 
                name="text" 
                rows="3" 
                placeholder="Write your note..." 
                class="w-full px-3 py-2 border rounded mb-2 text-sm leading-snug placeholder-gray-400"></textarea> <!-- tailwing css to make lineheight match padding-->

                <button 
                    type="submit" 
                    class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
                    @click="open = !open">
                    Submit
                </button>
            </form>

        </div>
        
      <!-- flag claim, message is coded in view function, two possible urls to either remove or add the flag to the flag pannel using htmx -->
        <div class="flex-1 mt-4 py-2 px-4 rounded-xl border border-gray-100">
            <form 
                method="POST"
                hx-post="{% if claim.flags.exists %}{% url 'remove_flag' claim.id %}{% else %}{% url 'add_flag' claim.id %}{% endif %}"  
                hx-target="#flag-panel"                        
                hx-swap="innerHTML"                             
                class="flex gap-2"
            >
                {% csrf_token %}
                <!-- flag button takes up entire div -->
                <button type="submit" 
                        class=" w-full h-full text-gray-500 flex items-center gap-2"
                >
                    <!-- flag svg icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5" />
                    </svg>

                    {% if claim.flags.exists %}
                        Remove Flag
                    {% else %}
                        Flag for Review
                    {% endif %}
                </button>
            </form>

        </div>

        <!-- edit claim button, form hidden until button is clicked, takes up full div -->
        <div x-data="{ open: false }" class="flex-1 mt-4 py-2 px-4 rounded-xl border border-gray-100">
            <button 
                @click="open = !open" 
                hx-get="{% url 'edit_claim' claim.id %}"
                hx-target="#edit-panel"
                hx-swap="innerHTML"
                class="w-full h-full text-gray-500 flex items-center gap-2">
                <!-- pencil svg icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
                </svg>
                Edit Claim
            </button>
            
            <!-- form output div -->
            <div    id="edit-panel"
                    hx-target="#edit-panel"
                    hx-swap="innerHTML">
            </div>
        </div>
        
        <!-- generate report button, calls admin_dashboard partial to update div, button takes up full div-->
        <div class="flex-1 mt-4 py-2 px-4 rounded-xl border border-gray-100">
            
            <button class=" w-full h-full text-gray-500 flex items-center gap-2"
                    hx-get="{% url 'admin_dashboard' %}"   
                    hx-target="#admin-panel"          
                    hx-swap="innerHTML"
            >
                <!-- doc svg icon -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                </svg>
                Generate Report
            </button>
        </div>

    </div>

    <!-- hidden input for listener to update the table when a flag is added or removed -->
    <input type="hidden" id="current-page" value="{{ claims.number }}">

    <script>
        
        //this listener waits for the flag-panel to be targeted, then takes the claim id from the two possible urls being called to update the flag button and the table -->
        document.body.addEventListener('htmx:afterSwap', function(evt) {
            const targetId = evt.target.id;
            
            //hidden inputs 
            const page = document.getElementById('current-page')?.value || 1;                                  //gets page number of table
            const q = document.getElementById('current-q')?.value || '';                                       //gets current query paramter
            const insurer = document.getElementById('current-insurer')?.value || '';                           //gets insurer
            const status = document.getElementById('current-status')?.value || '';                             //gets claim status 

            if (targetId === 'flag-panel') {                                                                   //triggers when flag-panel is swapped
                const urlMatch = evt.detail.xhr.responseURL.match(/\/claim\/(\d+)\/(add|remove)-flag/);        //used to extract the claim id from the url being called, with two possible options
                if (urlMatch) {
                    const claimId = urlMatch[1];                                                               //claim id stored in index 1

                    // Trigger the actions partial to update the button
                    htmx.ajax('GET', `/claim/${claimId}/actions/`, {target: '#quick-actions-panel', swap: 'innerHTML'});
                    
                    //Update claims table with current page and filter parameters if they exist 
                    htmx.ajax('GET', `/?page=${page}&q=${encodeURIComponent(q)}&insurer=${encodeURIComponent(insurer)}&status=${encodeURIComponent(status)}`, {target: '#claims-table', swap: 'innerHTML'});
                }
            }
    
        });

        //listens for notes-panel to be swapped to rerender table to show note svg icon and remains in current page 
        document.body.addEventListener('htmx:afterSwap', function(evt) {
            const targetId = evt.target.id;

            //hidden inputs 
            const page = document.getElementById('current-page')?.value || 1;                                  //gets page number of table
            const q = document.getElementById('current-q')?.value || '';                                       //gets current query paramter
            const insurer = document.getElementById('current-insurer')?.value || '';                           //gets insurer
            const status = document.getElementById('current-status')?.value || ''; 

            // Trigger only when notes-panel is swapped
            if (targetId === 'notes-panel') {
                // Extract the claim ID from the current URL (or the triggering element)
                const urlMatch = evt.detail.xhr.responseURL.match(/\/claim\/(\d+)\/add-note/);

                if (urlMatch) {
                    const claimId = urlMatch[1];

                    //Update claims table with current page and filter parameters if they exist 
                    htmx.ajax('GET', `/?page=${page}&q=${encodeURIComponent(q)}&insurer=${encodeURIComponent(insurer)}&status=${encodeURIComponent(status)}`, {target: '#claims-table', swap: 'innerHTML'});
                   
                }
            }

        });

        
    
    </script>